<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1jour1histoire - Chaque jour une surprise !</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: url('https://github.com/1jour1histoirs/1jour1histoires/blob/main/C22094C5-71B2-4004-8502-2CEC644F56B3.png?raw=true') center/cover no-repeat fixed;
            min-height: 100vh;
            color: white;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        .welcome-message {
            text-align: center;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            border: 2px solid #4a90e2;
            box-shadow: 0 4px 20px rgba(74, 144, 226, 0.3);
        }

        .welcome-message h1 {
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            margin-bottom: 10px;
            color: #4a90e2;
        }

        .welcome-message p {
            font-size: clamp(1rem, 2.5vw, 1.3rem);
            opacity: 0.9;
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }

        .category-selector {
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #4a90e2;
        }

        .category-selector label {
            display: block;
            margin-bottom: 10px;
            font-size: 1.1rem;
            color: #4a90e2;
            font-weight: 600;
        }

        .category-selector select {
            width: 100%;
            padding: 12px 16px;
            font-size: 16px;
            background: #1a1a1a;
            color: white;
            border: 2px solid #4a90e2;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .category-selector select:focus {
            outline: none;
            border-color: #6bb6ff;
            box-shadow: 0 0 10px rgba(107, 182, 255, 0.5);
        }

        .chapters-container {
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #4a90e2;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
            display: none;
        }

        .chapters-container.show {
            opacity: 1;
            transform: translateY(0);
            display: block;
        }

        .chapters-title {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: #4a90e2;
            text-align: center;
            font-weight: 600;
        }

        .chapters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .chapter-button {
            background: linear-gradient(135deg, #4a90e2, #357abd);
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(74, 144, 226, 0.3);
        }

        .chapter-button:hover {
            background: linear-gradient(135deg, #357abd, #2c5f99);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(74, 144, 226, 0.4);
        }

        .chapter-button:active {
            transform: translateY(0);
        }

        .story-display {
            background: rgba(20, 20, 20, 0.95);
            padding: 25px;
            border-radius: 10px;
            border: 2px solid #4a90e2;
            margin-top: 20px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.4s ease;
            display: none;
            line-height: 1.6;
        }

        .story-display.show {
            opacity: 1;
            transform: translateY(0);
            display: block;
        }

        .quiz-container {
            background: rgba(20, 20, 20, 0.95);
            padding: 25px;
            border-radius: 10px;
            border: 2px solid #4a90e2;
            margin-top: 20px;
        }

        .quiz-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .quiz-score {
            background: linear-gradient(135deg, #4a90e2, #357abd);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            display: inline-block;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .quiz-question {
            background: rgba(74, 144, 226, 0.1);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #4a90e2;
            margin-bottom: 20px;
        }

        .quiz-question h3 {
            color: #4a90e2;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .quiz-answers {
            display: grid;
            gap: 10px;
        }

        .quiz-answer {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #4a90e2;
            color: white;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .quiz-answer:hover {
            background: rgba(74, 144, 226, 0.2);
            transform: translateX(5px);
        }

        .quiz-answer.correct {
            background: linear-gradient(135deg, #28a745, #20c997);
            border-color: #28a745;
            animation: correctAnswer 0.5s ease;
        }

        .quiz-answer.wrong {
            background: linear-gradient(135deg, #dc3545, #e74c3c);
            border-color: #dc3545;
            animation: wrongAnswer 0.5s ease;
        }

        .quiz-answer.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        @keyframes correctAnswer {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes wrongAnswer {
            0% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
            100% { transform: translateX(0); }
        }

        .quiz-next {
            background: linear-gradient(135deg, #4a90e2, #357abd);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            margin: 20px auto;
            display: none;
            transition: all 0.3s ease;
        }

        .quiz-next:hover {
            background: linear-gradient(135deg, #357abd, #2c5f99);
            transform: translateY(-2px);
        }

        .quiz-next.show {
            display: block;
        }

        .quiz-results {
            text-align: center;
            padding: 30px;
            background: rgba(74, 144, 226, 0.1);
            border-radius: 10px;
            border: 2px solid #4a90e2;
        }

        .quiz-results h2 {
            color: #4a90e2;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .quiz-results .final-score {
            font-size: 2rem;
            font-weight: bold;
            margin: 20px 0;
        }

        .quiz-results .score-excellent {
            color: #28a745;
        }

        .quiz-results .score-good {
            color: #ffc107;
        }

        .quiz-results .score-needs-improvement {
            color: #dc3545;
        }

        .quiz-restart {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .quiz-restart:hover {
            background: linear-gradient(135deg, #20c997, #17a085);
            transform: translateY(-2px);
        }

        .memo-container {
            background: rgba(20, 20, 20, 0.95);
            padding: 25px;
            border-radius: 10px;
            border: 2px solid #4a90e2;
            margin-top: 20px;
        }

        .memo-phase {
            text-align: center;
        }

        .memo-story {
            background: rgba(74, 144, 226, 0.1);
            padding: 25px;
            border-radius: 10px;
            border: 1px solid #4a90e2;
            margin: 20px 0;
            line-height: 1.6;
            font-size: 1.1rem;
        }

        .memo-timer {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            padding: 15px 25px;
            border-radius: 20px;
            display: inline-block;
            font-weight: bold;
            font-size: 1.3rem;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
            animation: timerPulse 1s infinite;
        }

        @keyframes timerPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .memo-timer.warning {
            background: linear-gradient(135deg, #ff9800, #f57c00);
            animation: timerWarning 0.5s infinite;
        }

        .memo-timer.danger {
            background: linear-gradient(135deg, #f44336, #d32f2f);
            animation: timerDanger 0.3s infinite;
        }

        @keyframes timerWarning {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes timerDanger {
            0% { transform: scale(1); box-shadow: 0 4px 15px rgba(244, 67, 54, 0.4); }
            50% { transform: scale(1.15); box-shadow: 0 6px 25px rgba(244, 67, 54, 0.8); }
            100% { transform: scale(1); box-shadow: 0 4px 15px rgba(244, 67, 54, 0.4); }
        }

        .memo-question {
            background: rgba(74, 144, 226, 0.1);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #4a90e2;
            margin: 20px 0;
        }

        .memo-question h3 {
            color: #4a90e2;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .memo-input {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #4a90e2;
            border-radius: 8px;
            color: white;
            margin: 15px 0;
            transition: all 0.3s ease;
        }

        .memo-input:focus {
            outline: none;
            border-color: #6bb6ff;
            box-shadow: 0 0 10px rgba(107, 182, 255, 0.5);
            background: rgba(255, 255, 255, 0.15);
        }

        .memo-submit {
            background: linear-gradient(135deg, #4a90e2, #357abd);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            margin: 15px 0;
            transition: all 0.3s ease;
        }

        .memo-submit:hover:not(:disabled) {
            background: linear-gradient(135deg, #357abd, #2c5f99);
            transform: translateY(-2px);
        }

        .memo-submit:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .memo-result {
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .memo-result.success {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
        }

        .memo-result.failure {
            background: linear-gradient(135deg, #dc3545, #e74c3c);
            color: white;
        }

        .memo-restart {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .memo-restart:hover {
            background: linear-gradient(135deg, #20c997, #17a085);
            transform: translateY(-2px);
        }

        .story-display h3 {
            color: #4a90e2;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .social-links {
            text-align: center;
            margin-top: 40px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
        }

        .tiktok-container {
            text-align: center;
        }

        .paypal-container {
            text-align: center;
        }

        .paypal-button {
            display: inline-block;
            background: linear-gradient(135deg, #ffc439, #ff8c00);
            color: #333;
            text-decoration: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(255, 196, 57, 0.4);
            border: 2px solid #ffc439;
        }

        .paypal-button:hover {
            background: linear-gradient(135deg, #ff8c00, #e67300);
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(255, 196, 57, 0.6);
            color: #333;
        }

        .tiktok-button {
            display: inline-block;
            background: linear-gradient(135deg, #ff0050, #ff0080);
            color: white;
            text-decoration: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(255, 0, 80, 0.4);
            border: 2px solid #ff0050;
        }

        .tiktok-button:hover {
            background: linear-gradient(135deg, #ff0080, #e6006b);
            transform: translateY(-3px);
            box-shadow: 0 6px 25px rgba(255, 0, 80, 0.6);
            color: white;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .chapters-grid {
                grid-template-columns: 1fr;
            }

            .welcome-message {
                padding: 15px;
                margin-bottom: 20px;
            }

            .story-display {
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }

            .welcome-message {
                padding: 12px;
            }

            .category-selector,
            .chapters-container {
                padding: 15px;
            }

            .paypal-button,
            .tiktok-button {
                padding: 12px 25px;
                font-size: 1rem;
            }

            .social-links {
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="welcome-message">
            <h1>üìö Bienvenue sur 1jour1histoire</h1>
            <p>Chaque jour une surprise !</p>
        </div>

        <div class="controls">
            <div class="category-selector">
                <label for="category">Choisissez votre cat√©gorie :</label>
                <select id="category">
                    <option value="">-- S√©lectionnez une cat√©gorie --</option>
                    <option value="enfant">Histoire Enfant</option>
                    <option value="adulte">Histoire Adulte</option>
                    <option value="religion">Histoire Religion</option>
                    <option value="quiz">üß† Quiz Interactif</option>
                    <option value="memo">üß† M√©mo 30 secondes</option>
                    <option value="enigme">üîç √ânigmes</option>
                </select>
            </div>

            <div class="chapters-container" id="chapters-container">
                <div class="chapters-title" id="chapters-title">Chapitres disponibles</div>
                <div class="chapters-grid" id="chapters-grid">
                    <!-- Chapitres g√©n√©r√©s dynamiquement -->
                </div>
                <div class="story-display" id="story-display">
                    <!-- Histoire affich√©e ici -->
                </div>
            </div>
        </div>

        <div class="social-links">
            <div class="tiktok-container">
                <a href="https://www.tiktok.com/@1jour1hiistoires?_t=ZN-8x0JWagYNk6&_r=1" 
                   target="_blank" 
                   class="tiktok-button">
                    üéµ Suivez-nous sur TikTok @1jour1hiistoires
                </a>
            </div>
            
            <div class="paypal-container">
                <a href="https://www.paypal.com/donate?business=mbkauto42%40gmail.com" 
                   target="_blank" 
                   class="paypal-button">
                    üëâ Aider √† me faire grandir üíõ
                </a>
            </div>
        </div>
    </div>

    <script>
        const enigmeData = {
            enigmes: [
                {
                    enigme: "üßÆ Je suis un nombre. Si tu me multiplies par 2 puis que tu m'ajoutes 6, tu obtiens 16. Qui suis-je ?",
                    answers: ["A) 5", "B) 10", "C) 8"],
                    correct: 0,
                    explication: "Si x √ó 2 + 6 = 16, alors x √ó 2 = 10, donc x = 5"
                },
                {
                    enigme: "üè† Dans une maison, il y a 4 coins. Dans chaque coin, il y a un chat. Chaque chat voit 3 autres chats. Combien y a-t-il de chats en tout ?",
                    answers: ["A) 12 chats", "B) 4 chats", "C) 16 chats"],
                    correct: 1,
                    explication: "Il y a 4 chats au total, un dans chaque coin. Chacun voit les 3 autres."
                },
                {
                    enigme: "üïê Il est maintenant 15h. Dans combien d'heures l'aiguille des heures et celle des minutes se superposeront-elles pour la premi√®re fois ?",
                    answers: ["A) Dans 3h20", "B) Dans 2h10", "C) Dans 1h05"],
                    correct: 2,
                    explication: "Les aiguilles se superposent √† 16h05, soit dans 1h05."
                },
                {
                    enigme: "üî§ Quel est le mot de 5 lettres qui devient plus court quand on lui ajoute 2 lettres ?",
                    answers: ["A) Court", "B) Petit", "C) Grand"],
                    correct: 0,
                    explication: "Le mot 'Court' devient 'Plus court' quand on ajoute 'Plus'."
                },
                {
                    enigme: "üöó Un conducteur descend une rue √† sens unique dans le mauvais sens. Il croise 3 policiers mais aucun ne l'arr√™te. Pourquoi ?",
                    answers: ["A) Il est invisible", "B) Il marche √† pied", "C) C'est son p√®re"],
                    correct: 1,
                    explication: "Il marche √† pied ! On peut marcher dans les deux sens dans une rue √† sens unique."
                },
                {
                    enigme: "üéÇ Marie a 8 ans aujourd'hui. Sa m√®re a 3 fois son √¢ge. Dans combien d'ann√©es la m√®re aura-t-elle 2 fois l'√¢ge de Marie ?",
                    answers: ["A) Dans 8 ans", "B) Dans 16 ans", "C) Dans 12 ans"],
                    correct: 0,
                    explication: "La m√®re a 24 ans. Dans 8 ans : Marie 16 ans, sa m√®re 32 ans (2√ó16)."
                },
                {
                    enigme: "üí° Plus on m'enl√®ve, plus je deviens grand. Qui suis-je ?",
                    answers: ["A) Un trou", "B) Une dette", "C) L'espace"],
                    correct: 0,
                    explication: "Un trou : plus on enl√®ve de terre, plus le trou devient grand."
                },
                {
                    enigme: "üß© Dans une course, tu d√©passes le 2√®me. √Ä quelle position te trouves-tu maintenant ?",
                    answers: ["A) 1√®re position", "B) 2√®me position", "C) 3√®me position"],
                    correct: 1,
                    explication: "Tu prends la place du 2√®me, donc tu es maintenant 2√®me."
                },
                {
                    enigme: "üî• Qu'est-ce qui peut voyager autour du monde en restant dans un coin ?",
                    answers: ["A) Un timbre", "B) Une araign√©e", "C) La poussi√®re"],
                    correct: 0,
                    explication: "Un timbre postal reste dans le coin d'une enveloppe qui voyage."
                },
                {
                    enigme: "‚öñÔ∏è Tu as 12 boules identiques en apparence, mais l'une d'elles est plus lourde. Avec une balance √† 2 plateaux, combien de pes√©es minimum faut-il pour la trouver ?",
                    answers: ["A) 2 pes√©es", "B) 3 pes√©es", "C) 4 pes√©es"],
                    correct: 1,
                    explication: "Avec 3 pes√©es maximum : diviser en 3 groupes de 4, puis affiner."
                },
                {
                    enigme: "üåä Un bateau part de France vers l'Am√©rique avec 20 moutons et 15 ch√®vres. En arrivant, il reste seulement 5 moutons et 8 ch√®vres. Comment s'appelle le capitaine ?",
                    answers: ["A) Jean-Pierre", "B) Mohammed", "C) C'est votre pr√©nom"],
                    correct: 2,
                    explication: "Pi√®ge ! La question demande VOTRE pr√©nom car VOUS √™tes le capitaine."
                },
                {
                    enigme: "üèÉ‚Äç‚ôÇÔ∏è Paul court toujours mais n'avance jamais. Julie vole mais n'a pas d'ailes. Marc nage mais n'est jamais mouill√©. Qui sont-ils ?",
                    answers: ["A) Des sportifs virtuels", "B) Des noms sur un √©cran", "C) Des aiguilles d'horloge"],
                    correct: 1,
                    explication: "Ce sont des noms affich√©s sur l'√©cran d'un ordinateur ou d'un jeu."
                }
            ]
        };

        let currentEnigme = {
            currentQuestion: 0,
            score: 0,
            enigmes: [],
            answered: false
        };

        const quizData = {
            questions: [
                {
                    question: "Quelle est la capitale de la France ?",
                    answers: ["Paris", "Lyon", "Marseille", "Toulouse"],
                    correct: 0
                },
                {
                    question: "Combien de continents y a-t-il sur Terre ?",
                    answers: ["5", "6", "7", "8"],
                    correct: 2
                },
                {
                    question: "Qui a √©crit 'Les Mis√©rables' ?",
                    answers: ["√âmile Zola", "Victor Hugo", "Gustave Flaubert", "Alexandre Dumas"],
                    correct: 1
                },
                {
                    question: "Quelle est la plan√®te la plus proche du Soleil ?",
                    answers: ["V√©nus", "Terre", "Mercure", "Mars"],
                    correct: 2
                },
                {
                    question: "En quelle ann√©e a eu lieu la R√©volution fran√ßaise ?",
                    answers: ["1789", "1799", "1804", "1815"],
                    correct: 0
                },
                {
                    question: "Quel est le plus grand oc√©an du monde ?",
                    answers: ["Atlantique", "Indien", "Arctique", "Pacifique"],
                    correct: 3
                },
                {
                    question: "Combien de c√¥t√©s a un hexagone ?",
                    answers: ["5", "6", "7", "8"],
                    correct: 1
                },
                {
                    question: "Qui a peint 'La Joconde' ?",
                    answers: ["Pablo Picasso", "Vincent van Gogh", "Leonardo da Vinci", "Claude Monet"],
                    correct: 2
                },
                {
                    question: "Quelle est la langue la plus parl√©e au monde ?",
                    answers: ["Anglais", "Mandarin", "Espagnol", "Hindi"],
                    correct: 1
                },
                {
                    question: "Combien de minutes y a-t-il dans une heure ?",
                    answers: ["50", "60", "70", "80"],
                    correct: 1
                }
            ]
        };

        let currentQuiz = {
            currentQuestion: 0,
            score: 0,
            questions: [],
            answered: false
        };

        const memoQuestions = {
            enfant: [
                { 
                    question: "Comment s'appelait la petite f√©e dans l'histoire ?", 
                    answers: ["A) Luna", "B) Stella", "C) Iris"], 
                    correct: 0,
                    explanation: "La petite f√©e s'appelait Luna et vivait dans un jardin magique."
                },
                { 
                    question: "Quel animal √©tait l'ami de F√©lix dans l'histoire ?", 
                    answers: ["A) Un lapin", "B) Un √©cureuil", "C) Un h√©risson"], 
                    correct: 1,
                    explanation: "F√©lix le renard avait pour ami l'√©cureuil Noisette."
                },
                { 
                    question: "Quel pouvoir avait la princesse √âtoile ?", 
                    answers: ["A) Contr√¥ler le vent", "B) Faire appara√Ætre des √©toiles filantes", "C) Parler aux animaux"], 
                    correct: 1,
                    explanation: "La princesse √âtoile pouvait faire appara√Ætre des √©toiles filantes."
                },
                { 
                    question: "Que cr√©ait L√©o le dragon au lieu de cracher du feu ?", 
                    answers: ["A) Des bulles multicolores", "B) De la fum√©e rose", "C) Des √©tincelles dor√©es"], 
                    correct: 0,
                    explanation: "L√©o cr√©ait de magnifiques bulles multicolores qui rendaient tout le monde heureux."
                },
                { 
                    question: "Que gardait la sir√®ne Perle ?", 
                    answers: ["A) Un tr√©sor sous-marin", "B) Un phare magique", "C) Une grotte secr√®te"], 
                    correct: 1,
                    explanation: "La sir√®ne Perle gardait un phare magique qui guidait les bateaux perdus."
                }
            ],
            adulte: [
                { 
                    question: "Depuis combien d'ann√©es Marie tenait-elle sa boutique ?", 
                    answers: ["A) 30 ans", "B) 40 ans", "C) 50 ans"], 
                    correct: 1,
                    explanation: "Marie tenait sa boutique de fleurs depuis 40 ans."
                },
                { 
                    question: "Quel √©tait le m√©tier de Thomas ?", 
                    answers: ["A) Architecte", "B) Ing√©nieur", "C) Menuisier"], 
                    correct: 0,
                    explanation: "Thomas √©tait architecte et maintenant √† la retraite."
                },
                { 
                    question: "Quel type d'√©tablissement Sophie a-t-elle ouvert ?", 
                    answers: ["A) Une boulangerie", "B) Un caf√©-librairie", "C) Une galerie d'art"], 
                    correct: 1,
                    explanation: "Sophie a quitt√© son travail de cadre pour ouvrir un caf√©-librairie."
                },
                { 
                    question: "Apr√®s combien d'ann√©es Jean a-t-il retrouv√© son premier amour ?", 
                    answers: ["A) 25 ans", "B) 30 ans", "C) 35 ans"], 
                    correct: 1,
                    explanation: "Jean a retrouv√© son premier amour apr√®s 30 ans lors d'une r√©union d'anciens √©l√®ves."
                },
                { 
                    question: "Quel √©tait le m√©tier d'√âlise ?", 
                    answers: ["A) Journaliste", "B) Photographe", "C) R√©alisatrice"], 
                    correct: 1,
                    explanation: "√âlise √©tait photographe de guerre avant de se reconvertir."
                }
            ],
            religion: [
                { 
                    question: "Comment s'appelait le fr√®re du monast√®re ?", 
                    answers: ["A) Antoine", "B) Fran√ßois", "C) Bernard"], 
                    correct: 0,
                    explanation: "Le fr√®re Antoine passait ses journ√©es √† copier des manuscrits anciens."
                },
                { 
                    question: "Comment s'appelait la jeune femme en p√®lerinage ?", 
                    answers: ["A) Marie", "B) Sarah", "C) Claire"], 
                    correct: 1,
                    explanation: "Sarah √©tait la jeune femme en qu√™te de spiritualit√© qui entreprit un p√®lerinage √† pied."
                },
                { 
                    question: "Comment s'appelait le cur√© du village ?", 
                    answers: ["A) Pierre", "B) Michel", "C) Paul"], 
                    correct: 1,
                    explanation: "Le p√®re Michel √©tait le cur√© d'un village isol√©."
                },
                { 
                    question: "Comment s'appelait le rabbin ?", 
                    answers: ["A) Samuel", "B) David", "C) Isaac"], 
                    correct: 1,
                    explanation: "Le rabbin David organisait des d√Æners pour les personnes seules dans sa synagogue."
                },
                { 
                    question: "Comment s'appelait la jeune musulmane ?", 
                    answers: ["A) Fatima", "B) Amina", "C) Aicha"], 
                    correct: 1,
                    explanation: "Amina √©tait la jeune musulmane qui luttait pour concilier sa foi et sa vie moderne."
                }
            ]
        };

        let currentMemo = {
            category: '',
            chapter: 0,
            question: {},
            timer: null,
            timeLeft: 30,
            phase: 'reading', // 'reading', 'questioning', 'finished'
            answered: false
        };

        const stories = {
            enfant: {
                title: "Histoires pour Enfants - Quiz",
                chapters: {
                    1: {
                        story: "Il √©tait une fois une petite f√©e nomm√©e Luna qui vivait dans un jardin magique. Un jour, elle d√©couvrit que toutes les fleurs avaient perdu leurs couleurs. Avec l'aide de ses amis les papillons, elle partit √† la recherche de l'arc-en-ciel perdu pour redonner vie √† son jardin.",
                        questions: [
                            {
                                question: "Comment s'appelait la petite f√©e de l'histoire ?",
                                answers: ["A) Luna", "B) Stella", "C) Aurora"],
                                correct: 0,
                                explanation: "La petite f√©e s'appelait Luna et vivait dans un jardin magique."
                            },
                            {
                                question: "Que d√©couvrit Luna dans son jardin ?",
                                answers: ["A) Que les fleurs √©taient fan√©es", "B) Que les fleurs avaient perdu leurs couleurs", "C) Que les fleurs parlaient"],
                                correct: 1,
                                explanation: "Luna d√©couvrit que toutes les fleurs avaient perdu leurs couleurs."
                            },
                            {
                                question: "Qui aida Luna dans sa qu√™te ?",
                                answers: ["A) Les oiseaux", "B) Les papillons", "C) Les abeilles"],
                                correct: 1,
                                explanation: "Luna partit √† la recherche de l'arc-en-ciel avec l'aide de ses amis les papillons."
                            }
                        ]
                    },
                    2: {
                        story: "Dans une for√™t enchant√©e, un petit renard curieux nomm√© F√©lix d√©couvrit une carte au tr√©sor. Il d√©cida de partir √† l'aventure avec son ami l'√©cureuil Noisette. Ensemble, ils apprirent que le v√©ritable tr√©sor √©tait leur amiti√©.",
                        questions: [
                            {
                                question: "Comment s'appelait le petit renard ?",
                                answers: ["A) F√©lix", "B) Oscar", "C) Roux"],
                                correct: 0,
                                explanation: "Le petit renard curieux s'appelait F√©lix."
                            },
                            {
                                question: "Qu'est-ce que F√©lix d√©couvrit ?",
                                answers: ["A) Un livre magique", "B) Une carte au tr√©sor", "C) Une grotte secr√®te"],
                                correct: 1,
                                explanation: "F√©lix d√©couvrit une carte au tr√©sor dans la for√™t enchant√©e."
                            },
                            {
                                question: "Quel √©tait le v√©ritable tr√©sor d√©couvert ?",
                                answers: ["A) De l'or", "B) Des pierres pr√©cieuses", "C) L'amiti√©"],
                                correct: 2,
                                explanation: "F√©lix et Noisette apprirent que le v√©ritable tr√©sor √©tait leur amiti√©."
                            }
                        ]
                    },
                    3: {
                        story: "La princesse √âtoile avait un pouvoir sp√©cial : elle pouvait faire appara√Ætre des √©toiles filantes. Un soir, elle remarqua qu'un petit village √©tait triste car ils n'avaient jamais vu d'√©toiles. Elle d√©cida de leur offrir la plus belle nuit √©toil√©e de leur vie.",
                        questions: [
                            {
                                question: "Quel √©tait le pouvoir de la princesse √âtoile ?",
                                answers: ["A) Contr√¥ler le vent", "B) Faire appara√Ætre des √©toiles filantes", "C) Parler aux animaux"],
                                correct: 1,
                                explanation: "La princesse √âtoile pouvait faire appara√Ætre des √©toiles filantes."
                            },
                            {
                                question: "Pourquoi le village √©tait-il triste ?",
                                answers: ["A) Il pleuvait toujours", "B) Ils n'avaient jamais vu d'√©toiles", "C) Ils √©taient pauvres"],
                                correct: 1,
                                explanation: "Le petit village √©tait triste car ses habitants n'avaient jamais vu d'√©toiles."
                            },
                            {
                                question: "Que d√©cida de faire la princesse ?",
                                answers: ["A) Partir en voyage", "B) Offrir la plus belle nuit √©toil√©e", "C) Construire un ch√¢teau"],
                                correct: 1,
                                explanation: "La princesse d√©cida d'offrir au village la plus belle nuit √©toil√©e de leur vie."
                            }
                        ]
                    },
                    4: {
                        story: "L√©o le petit dragon ne savait pas cracher du feu comme les autres dragons. Il √©tait tr√®s triste jusqu'au jour o√π il d√©couvrit qu'il pouvait cr√©er de magnifiques bulles multicolores qui rendaient tout le monde heureux.",
                        questions: [
                            {
                                question: "Que ne savait pas faire L√©o comme les autres dragons ?",
                                answers: ["A) Voler", "B) Cracher du feu", "C) Rugir"],
                                correct: 1,
                                explanation: "L√©o ne savait pas cracher du feu comme les autres dragons."
                            },
                            {
                                question: "Que d√©couvrit L√©o qu'il savait faire ?",
                                answers: ["A) Cr√©er des bulles multicolores", "B) Chanter", "C) Danser"],
                                correct: 0,
                                explanation: "L√©o d√©couvrit qu'il pouvait cr√©er de magnifiques bulles multicolores."
                            },
                            {
                                question: "Quel effet avaient les bulles de L√©o ?",
                                answers: ["A) Elles explosaient", "B) Elles rendaient tout le monde heureux", "C) Elles sentaient bon"],
                                correct: 1,
                                explanation: "Les bulles multicolores de L√©o rendaient tout le monde heureux."
                            }
                        ]
                    },
                    5: {
                        story: "Dans un royaume sous-marin, la sir√®ne Perle gardait un phare magique qui guidait les bateaux perdus. Quand une terrible temp√™te √©teignit sa lumi√®re, elle dut faire appel au courage de tous les poissons pour rallumer l'espoir.",
                        questions: [
                            {
                                question: "Que gardait la sir√®ne Perle ?",
                                answers: ["A) Un tr√©sor", "B) Un phare magique", "C) Un palais"],
                                correct: 1,
                                explanation: "La sir√®ne Perle gardait un phare magique sous-marin."
                            },
                            {
                                question: "√Ä quoi servait le phare magique ?",
                                answers: ["A) √Ä √©clairer le royaume", "B) √Ä guider les bateaux perdus", "C) √Ä effrayer les ennemis"],
                                correct: 1,
                                explanation: "Le phare magique guidait les bateaux perdus."
                            },
                            {
                                question: "Qui aida Perle √† rallumer l'espoir ?",
                                answers: ["A) Les dauphins", "B) Tous les poissons", "C) Les baleines"],
                                correct: 1,
                                explanation: "Perle fit appel au courage de tous les poissons pour rallumer l'espoir."
                            }
                        ]
                    }
                }
            },
            adulte: {
                title: "Histoires pour Adultes - Quiz",
                chapters: {
                    1: {
                        story: "Marie ferma sa boutique de fleurs pour la derni√®re fois apr√®s 40 ans. En rangeant, elle d√©couvrit une lettre cach√©e depuis des d√©cennies. Cette lettre allait changer sa perspective sur toute sa vie et lui r√©v√©ler un secret gard√© par sa grand-m√®re.",
                        questions: [
                            {
                                question: "Depuis combien de temps Marie tenait-elle sa boutique ?",
                                answers: ["A) 30 ans", "B) 40 ans", "C) 50 ans"],
                                correct: 1,
                                explanation: "Marie ferma sa boutique de fleurs apr√®s 40 ans d'activit√©."
                            },
                            {
                                question: "Que d√©couvrit Marie en rangeant ?",
                                answers: ["A) Un journal intime", "B) Une lettre cach√©e", "C) Une photo ancienne"],
                                correct: 1,
                                explanation: "En rangeant, Marie d√©couvrit une lettre cach√©e depuis des d√©cennies."
                            },
                            {
                                question: "Qui avait gard√© le secret r√©v√©l√© par la lettre ?",
                                answers: ["A) Sa m√®re", "B) Sa grand-m√®re", "C) Sa s≈ìur"],
                                correct: 1,
                                explanation: "La lettre r√©v√©lait un secret gard√© par sa grand-m√®re."
                            }
                        ]
                    },
                    2: {
                        story: "Thomas, architecte √† la retraite, d√©cida de construire une petite cabane dans les bois. Ce projet simple devint une qu√™te de sens qui le reconnecta avec la nature et avec lui-m√™me, lui apprenant que les plus belles cr√©ations naissent de la simplicit√©.",
                        questions: [
                            {
                                question: "Quel √©tait le m√©tier de Thomas ?",
                                answers: ["A) Architecte", "B) Ing√©nieur", "C) Menuisier"],
                                correct: 0,
                                explanation: "Thomas √©tait architecte et maintenant √† la retraite."
                            },
                            {
                                question: "Que d√©cida de construire Thomas ?",
                                answers: ["A) Une maison", "B) Une cabane dans les bois", "C) Un garage"],
                                correct: 1,
                                explanation: "Thomas d√©cida de construire une petite cabane dans les bois."
                            },
                            {
                                question: "Que lui apprit ce projet ?",
                                answers: ["A) Que le travail est difficile", "B) Que les plus belles cr√©ations naissent de la simplicit√©", "C) Qu'il √©tait trop vieux"],
                                correct: 1,
                                explanation: "Ce projet lui apprit que les plus belles cr√©ations naissent de la simplicit√©."
                            }
                        ]
                    },
                    3: {
                        story: "√Ä 50 ans, Sophie quitta son travail de cadre pour ouvrir un caf√©-librairie. Cette d√©cision bouleversa sa vie et celle de son quartier, prouvant qu'il n'est jamais trop tard pour suivre ses r√™ves et cr√©er du lien social.",
                        questions: [
                            {
                                question: "√Ä quel √¢ge Sophie changea-t-elle de vie ?",
                                answers: ["A) 45 ans", "B) 50 ans", "C) 55 ans"],
                                correct: 1,
                                explanation: "Sophie avait 50 ans quand elle quitta son travail de cadre."
                            },
                            {
                                question: "Qu'ouvrit Sophie apr√®s avoir quitt√© son travail ?",
                                answers: ["A) Un restaurant", "B) Un caf√©-librairie", "C) Une boutique"],
                                correct: 1,
                                explanation: "Sophie ouvrit un caf√©-librairie apr√®s avoir quitt√© son travail de cadre."
                            },
                            {
                                question: "Que prouva la d√©cision de Sophie ?",
                                answers: ["A) Que l'argent ne fait pas le bonheur", "B) Qu'il n'est jamais trop tard pour suivre ses r√™ves", "C) Que le travail est important"],
                                correct: 1,
                                explanation: "Sa d√©cision prouva qu'il n'est jamais trop tard pour suivre ses r√™ves."
                            }
                        ]
                    },
                    4: {
                        story: "Jean retrouva par hasard son premier amour apr√®s 30 ans lors d'une r√©union d'anciens √©l√®ves. Leur conversation d'une nuit leur fit comprendre que certaines connexions transcendent le temps et les circonstances de la vie.",
                        questions: [
                            {
                                question: "Apr√®s combien d'ann√©es Jean retrouva-t-il son premier amour ?",
                                answers: ["A) 25 ans", "B) 30 ans", "C) 35 ans"],
                                correct: 1,
                                explanation: "Jean retrouva son premier amour apr√®s 30 ans."
                            },
                            {
                                question: "O√π se retrouv√®rent-ils ?",
                                answers: ["A) Dans un caf√©", "B) √Ä une r√©union d'anciens √©l√®ves", "C) Dans la rue"],
                                correct: 1,
                                explanation: "Ils se retrouv√®rent lors d'une r√©union d'anciens √©l√®ves."
                            },
                            {
                                question: "Que leur fit comprendre leur conversation ?",
                                answers: ["A) Qu'ils avaient chang√©", "B) Que certaines connexions transcendent le temps", "C) Qu'ils √©taient trop vieux"],
                                correct: 1,
                                explanation: "Leur conversation leur fit comprendre que certaines connexions transcendent le temps."
                            }
                        ]
                    },
                    5: {
                        story: "√âlise, photographe de guerre fatigu√©e, d√©cida de documenter la beaut√© ordinaire de sa ville natale. Ce projet artistique la gu√©rit de ses traumatismes et lui redonna foi en l'humanit√© √† travers les petits gestes du quotidien.",
                        questions: [
                            {
                                question: "Quel √©tait le m√©tier d'√âlise ?",
                                answers: ["A) Journaliste", "B) Photographe de guerre", "C) Artiste"],
                                correct: 1,
                                explanation: "√âlise √©tait photographe de guerre et se sentait fatigu√©e."
                            },
                            {
                                question: "Que d√©cida de documenter √âlise ?",
                                answers: ["A) Les conflits", "B) La beaut√© ordinaire de sa ville", "C) Les c√©l√©brit√©s"],
                                correct: 1,
                                explanation: "√âlise d√©cida de documenter la beaut√© ordinaire de sa ville natale."
                            },
                            {
                                question: "Quel effet eut ce projet sur √âlise ?",
                                answers: ["A) Il l'ennuya", "B) Il la gu√©rit et lui redonna foi en l'humanit√©", "C) Il la rendit triste"],
                                correct: 1,
                                explanation: "Ce projet la gu√©rit de ses traumatismes et lui redonna foi en l'humanit√©."
                            }
                        ]
                    }
                }
            },
            religion: {
                title: "Histoires Religieuses - Quiz",
                chapters: {
                    1: {
                        story: "Dans un petit monast√®re, le fr√®re Antoine passait ses journ√©es √† copier des manuscrits anciens. Un jour, il d√©couvrit entre les pages d'un livre saint une pri√®re oubli√©e qui apportait une paix profonde √† tous ceux qui la r√©citaient.",
                        questions: [
                            {
                                question: "Comment s'appelait le fr√®re du monast√®re ?",
                                answers: ["A) Antoine", "B) Fran√ßois", "C) Bernard"],
                                correct: 0,
                                explanation: "Le fr√®re Antoine passait ses journ√©es √† copier des manuscrits anciens."
                            },
                            {
                                question: "Que faisait le fr√®re Antoine chaque jour ?",
                                answers: ["A) Il priait", "B) Il copiait des manuscrits", "C) Il jardinait"],
                                correct: 1,
                                explanation: "Le fr√®re Antoine passait ses journ√©es √† copier des manuscrits anciens."
                            },
                            {
                                question: "Que d√©couvrit-il dans un livre saint ?",
                                answers: ["A) Une illustration", "B) Une pri√®re oubli√©e", "C) Une carte"],
                                correct: 1,
                                explanation: "Il d√©couvrit une pri√®re oubli√©e qui apportait une paix profonde."
                            }
                        ]
                    },
                    2: {
                        story: "Sarah, jeune femme en qu√™te de spiritualit√©, entreprit un p√®lerinage √† pied. Chaque √©tape de son voyage lui enseigna une nouvelle le√ßon sur la foi, la pers√©v√©rance et la g√©n√©rosit√© des √¢mes qu'elle rencontrait sur son chemin.",
                        questions: [
                            {
                                question: "Comment s'appelait la jeune femme ?",
                                answers: ["A) Marie", "B) Sarah", "C) Claire"],
                                correct: 1,
                                explanation: "Sarah √©tait une jeune femme en qu√™te de spiritualit√©."
                            },
                            {
                                question: "Comment entreprit-elle son p√®lerinage ?",
                                answers: ["A) En voiture", "B) √Ä pied", "C) √Ä v√©lo"],
                                correct: 1,
                                explanation: "Sarah entreprit un p√®lerinage √† pied."
                            },
                            {
                                question: "Que lui enseigna chaque √©tape ?",
                                answers: ["A) La patience", "B) Des le√ßons sur la foi et la pers√©v√©rance", "C) L'humilit√©"],
                                correct: 1,
                                explanation: "Chaque √©tape lui enseigna des le√ßons sur la foi, la pers√©v√©rance et la g√©n√©rosit√©."
                            }
                        ]
                    },
                    3: {
                        story: "Le p√®re Michel, cur√© d'un village isol√©, vit sa foi √©branl√©e par les difficult√©s de ses paroissiens. C'est en aidant une famille dans le besoin qu'il red√©couvrit le v√©ritable sens de sa vocation et la force de la communaut√©.",
                        questions: [
                            {
                                question: "Comment s'appelait le cur√© ?",
                                answers: ["A) Pierre", "B) Michel", "C) Paul"],
                                correct: 1,
                                explanation: "Le p√®re Michel √©tait cur√© d'un village isol√©."
                            },
                            {
                                question: "Qu'est-ce qui √©branla sa foi ?",
                                answers: ["A) Une maladie", "B) Les difficult√©s de ses paroissiens", "C) Une dispute"],
                                correct: 1,
                                explanation: "Sa foi fut √©branl√©e par les difficult√©s de ses paroissiens."
                            },
                            {
                                question: "Comment red√©couvrit-il sa vocation ?",
                                answers: ["A) En priant", "B) En aidant une famille dans le besoin", "C) En voyageant"],
                                correct: 1,
                                explanation: "Il red√©couvrit sa vocation en aidant une famille dans le besoin."
                            }
                        ]
                    },
                    4: {
                        story: "Dans une synagogue centenaire, le rabbin David organisait chaque vendredi un d√Æner pour les personnes seules. Ces repas partag√©s cr√©√®rent des liens profonds et montr√®rent comment les traditions peuvent rassembler au-del√† des diff√©rences.",
                        questions: [
                            {
                                question: "Comment s'appelait le rabbin ?",
                                answers: ["A) Samuel", "B) David", "C) Isaac"],
                                correct: 1,
                                explanation: "Le rabbin David organisait des d√Æners dans sa synagogue."
                            },
                            {
                                question: "Que faisait le rabbin chaque vendredi ?",
                                answers: ["A) Il priait seul", "B) Il organisait un d√Æner pour les personnes seules", "C) Il √©tudiait"],
                                correct: 1,
                                explanation: "Chaque vendredi, il organisait un d√Æner pour les personnes seules."
                            },
                            {
                                question: "Que montr√®rent ces repas partag√©s ?",
                                answers: ["A) L'importance de la nourriture", "B) Comment les traditions peuvent rassembler", "C) La richesse de la communaut√©"],
                                correct: 1,
                                explanation: "Ces repas montr√®rent comment les traditions peuvent rassembler au-del√† des diff√©rences."
                            }
                        ]
                    },
                    5: {
                        story: "Amina, jeune musulmane, luttait pour concilier sa foi et sa vie moderne. √Ä travers les enseignements de sa grand-m√®re et la m√©ditation, elle apprit que la spiritualit√© peut s'√©panouir dans tous les aspects de la vie quotidienne.",
                        questions: [
                            {
                                question: "Comment s'appelait la jeune musulmane ?",
                                answers: ["A) Fatima", "B) Amina", "C) Aicha"],
                                correct: 1,
                                explanation: "Amina √©tait une jeune musulmane en qu√™te d'√©quilibre."
                            },
                            {
                                question: "Avec quoi luttait-elle ?",
                                answers: ["A) Sa famille", "B) Concilier sa foi et sa vie moderne", "C) Ses √©tudes"],
                                correct: 1,
                                explanation: "Amina luttait pour concilier sa foi et sa vie moderne."
                            },
                            {
                                question: "Qu'apprit-elle gr√¢ce √† sa grand-m√®re ?",
                                answers: ["A) Que la foi est difficile", "B) Que la spiritualit√© peut s'√©panouir partout", "C) Qu'il faut √™tre parfaite"],
                                correct: 1,
                                explanation: "Elle apprit que la spiritualit√© peut s'√©panouir dans tous les aspects de la vie quotidienne."
                            }
                        ]
                    }
                }
            }
        };

        const categorySelect = document.getElementById('category');
        const chaptersContainer = document.getElementById('chapters-container');
        const chaptersTitle = document.getElementById('chapters-title');
        const chaptersGrid = document.getElementById('chapters-grid');
        const storyDisplay = document.getElementById('story-display');

        categorySelect.addEventListener('change', function() {
            const selectedCategory = this.value;
            
            if (selectedCategory) {
                showChapters(selectedCategory);
            } else {
                hideChapters();
            }
        });

        function showChapters(category) {
            if (category === 'quiz') {
                showQuiz();
                return;
            }
            
            if (category === 'memo') {
                showMemo();
                return;
            }
            
            if (category === 'enigme') {
                showEnigme();
                return;
            }
            
            const categoryData = stories[category];
            
            // Mise √† jour du titre
            chaptersTitle.textContent = categoryData.title;
            
            // Cr√©ation des boutons de chapitres
            chaptersGrid.innerHTML = '';
            for (let i = 1; i <= 5; i++) {
                const button = document.createElement('button');
                button.className = 'chapter-button';
                button.textContent = `Chapitre ${i}`;
                button.addEventListener('click', () => showStory(category, i));
                chaptersGrid.appendChild(button);
            }
            
            // Masquer l'histoire pr√©c√©dente
            storyDisplay.classList.remove('show');
            
            // Afficher les chapitres avec animation
            setTimeout(() => {
                chaptersContainer.classList.add('show');
            }, 100);
        }

        function hideChapters() {
            chaptersContainer.classList.remove('show');
            storyDisplay.classList.remove('show');
        }

        function showStory(category, chapterNumber) {
            // Initialiser le quiz de l'histoire
            currentStory = {
                category: category,
                chapter: chapterNumber,
                currentQuestion: 0,
                score: 0,
                answered: false,
                data: stories[category].chapters[chapterNumber]
            };
            
            // Afficher l'histoire puis commencer le quiz
            showStoryReading();
        }

        let currentStory = {
            category: '',
            chapter: 0,
            currentQuestion: 0,
            score: 0,
            answered: false,
            data: {}
        };

        function showStoryReading() {
            storyDisplay.innerHTML = `
                <div class="quiz-container">
                    <h2 style="color: #4a90e2; margin-bottom: 20px;">üìñ Chapitre ${currentStory.chapter}</h2>
                    <p style="color: #ffc107; font-weight: 600; margin-bottom: 20px;">
                        Lisez attentivement cette histoire, puis r√©pondez aux questions !
                    </p>
                    
                    <div class="memo-story">
                        <p style="line-height: 1.8; font-size: 1.1rem;">${currentStory.data.story}</p>
                    </div>
                    
                    <div style="text-align: center; margin-top: 25px;">
                        <button class="memo-submit" onclick="startStoryQuiz()">
                            üß† Commencer le quiz sur cette histoire
                        </button>
                    </div>
                </div>
            `;
            
            // Masquer puis afficher avec animation
            storyDisplay.classList.remove('show');
            setTimeout(() => {
                storyDisplay.classList.add('show');
            }, 100);
        }

        function startStoryQuiz() {
            createStoryQuizInterface();
        }

        function createStoryQuizInterface() {
            const currentQuestion = currentStory.data.questions[currentStory.currentQuestion];
            
            storyDisplay.innerHTML = `
                <div class="quiz-container">
                    <div class="quiz-header">
                        <div class="quiz-score">
                            Score: <span id="current-story-score">${currentStory.score}</span>/${currentStory.data.questions.length}
                        </div>
                        <div style="color: #4a90e2; font-weight: 600;">
                            Question <span id="story-question-number">${currentStory.currentQuestion + 1}</span> sur ${currentStory.data.questions.length}
                        </div>
                    </div>
                    
                    <div class="quiz-question">
                        <h3 id="story-question-text">${currentQuestion.question}</h3>
                        <div class="quiz-answers" id="story-answers">
                            ${currentQuestion.answers.map((answer, index) => 
                                `<button class="quiz-answer" onclick="selectStoryAnswer(${index})">${answer}</button>`
                            ).join('')}
                        </div>
                    </div>
                    
                    <div style="text-align: center;">
                        <button class="quiz-next" id="story-next-button" onclick="nextStoryQuestion()">
                            ${currentStory.currentQuestion < currentStory.data.questions.length - 1 ? 'Question suivante' : 'Voir les r√©sultats'}
                        </button>
                    </div>
                    
                    <div id="story-explanation" style="display: none; background: rgba(74, 144, 226, 0.1); padding: 15px; border-radius: 8px; margin-top: 15px; border: 1px solid #4a90e2;">
                        <p style="color: #4a90e2; font-weight: 600; margin-bottom: 8px;">üí° Explication :</p>
                        <p style="color: white; font-size: 0.95rem;"></p>
                    </div>
                </div>
            `;
        }

        function selectStoryAnswer(selectedIndex) {
            if (currentStory.answered) return;
            
            currentStory.answered = true;
            const correctIndex = currentStory.data.questions[currentStory.currentQuestion].correct;
            const answers = document.querySelectorAll('.quiz-answer');
            const explanation = currentStory.data.questions[currentStory.currentQuestion].explanation;
            
            answers.forEach((answer, index) => {
                answer.classList.add('disabled');
                if (index === correctIndex) {
                    answer.classList.add('correct');
                } else if (index === selectedIndex) {
                    answer.classList.add('wrong');
                }
            });
            
            if (selectedIndex === correctIndex) {
                currentStory.score++;
                document.getElementById('current-story-score').textContent = currentStory.score;
            }
            
            // Afficher l'explication
            const explanationDiv = document.getElementById('story-explanation');
            explanationDiv.querySelector('p:last-child').textContent = explanation;
            explanationDiv.style.display = 'block';
            
            document.getElementById('story-next-button').classList.add('show');
        }

        function nextStoryQuestion() {
            currentStory.currentQuestion++;
            currentStory.answered = false;
            
            if (currentStory.currentQuestion < currentStory.data.questions.length) {
                // Question suivante
                const currentQuestion = currentStory.data.questions[currentStory.currentQuestion];
                
                document.getElementById('story-question-number').textContent = currentStory.currentQuestion + 1;
                document.getElementById('story-question-text').textContent = currentQuestion.question;
                
                const answersContainer = document.getElementById('story-answers');
                answersContainer.innerHTML = currentQuestion.answers.map((answer, index) => 
                    `<button class="quiz-answer" onclick="selectStoryAnswer(${index})">${answer}</button>`
                ).join('');
                
                const nextButton = document.getElementById('story-next-button');
                nextButton.classList.remove('show');
                nextButton.textContent = currentStory.currentQuestion < currentStory.data.questions.length - 1 ? 'Question suivante' : 'Voir les r√©sultats';
                
                // Masquer l'explication pr√©c√©dente
                document.getElementById('story-explanation').style.display = 'none';
            } else {
                // Afficher les r√©sultats
                showStoryResults();
            }
        }

        function showStoryResults() {
            const percentage = Math.round((currentStory.score / currentStory.data.questions.length) * 100);
            let scoreClass, message;
            
            if (percentage >= 80) {
                scoreClass = 'score-excellent';
                message = "üìö Excellent ! Vous avez bien retenu l'histoire !";
            } else if (percentage >= 60) {
                scoreClass = 'score-good';
                message = "üëç Bien jou√© ! Bonne compr√©hension de l'histoire !";
            } else {
                scoreClass = 'score-needs-improvement';
                message = "üìñ Relisez l'histoire pour mieux la retenir !";
            }
            
            storyDisplay.innerHTML = `
                <div class="quiz-results">
                    <h2>üèÜ R√©sultats du Chapitre ${currentStory.chapter}</h2>
                    <div class="final-score ${scoreClass}">
                        ${currentStory.score}/${currentStory.data.questions.length}
                    </div>
                    <div class="final-score ${scoreClass}">
                        ${percentage}%
                    </div>
                    <p style="font-size: 1.2rem; margin: 20px 0; color: white;">
                        ${message}
                    </p>
                    <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                        <button class="quiz-restart" onclick="showStoryReading()">
                            üìñ Relire l'histoire
                        </button>
                        <button class="quiz-restart" onclick="startStoryQuiz()" style="background: linear-gradient(135deg, #4a90e2, #357abd);">
                            üîÑ Refaire le quiz
                        </button>
                    </div>
                </div>
            `;
        }

        function showQuiz() {
            // Initialiser le quiz
            currentQuiz.currentQuestion = 0;
            currentQuiz.score = 0;
            currentQuiz.questions = [...quizData.questions].sort(() => Math.random() - 0.5).slice(0, 5);
            currentQuiz.answered = false;
            
            // Mise √† jour du titre
            chaptersTitle.textContent = "üß† Quiz Interactif - Testez vos connaissances !";
            
            // Masquer les boutons de chapitres
            chaptersGrid.style.display = 'none';
            
            // Masquer l'histoire pr√©c√©dente
            storyDisplay.classList.remove('show');
            
            // Cr√©er l'interface de quiz
            createQuizInterface();
            
            // Afficher le conteneur avec animation
            setTimeout(() => {
                chaptersContainer.classList.add('show');
            }, 100);
        }

        function createQuizInterface() {
            chaptersGrid.innerHTML = `
                <div class="quiz-container">
                    <div class="quiz-header">
                        <div class="quiz-score">
                            Score: <span id="current-score">${currentQuiz.score}</span>/${currentQuiz.questions.length}
                        </div>
                        <div style="color: #4a90e2; font-weight: 600;">
                            Question <span id="question-number">${currentQuiz.currentQuestion + 1}</span> sur ${currentQuiz.questions.length}
                        </div>
                    </div>
                    
                    <div class="quiz-question">
                        <h3 id="question-text">${currentQuiz.questions[currentQuiz.currentQuestion].question}</h3>
                        <div class="quiz-answers" id="quiz-answers">
                            ${currentQuiz.questions[currentQuiz.currentQuestion].answers.map((answer, index) => 
                                `<button class="quiz-answer" onclick="selectAnswer(${index})">${answer}</button>`
                            ).join('')}
                        </div>
                    </div>
                    
                    <div style="text-align: center;">
                        <button class="quiz-next" id="next-button" onclick="nextQuestion()">
                            ${currentQuiz.currentQuestion < currentQuiz.questions.length - 1 ? 'Question suivante' : 'Voir les r√©sultats'}
                        </button>
                    </div>
                </div>
            `;
            chaptersGrid.style.display = 'block';
        }

        function selectAnswer(selectedIndex) {
            if (currentQuiz.answered) return;
            
            currentQuiz.answered = true;
            const correctIndex = currentQuiz.questions[currentQuiz.currentQuestion].correct;
            const answers = document.querySelectorAll('.quiz-answer');
            
            answers.forEach((answer, index) => {
                answer.classList.add('disabled');
                if (index === correctIndex) {
                    answer.classList.add('correct');
                } else if (index === selectedIndex) {
                    answer.classList.add('wrong');
                }
            });
            
            if (selectedIndex === correctIndex) {
                currentQuiz.score++;
                document.getElementById('current-score').textContent = currentQuiz.score;
            }
            
            document.getElementById('next-button').classList.add('show');
        }

        function nextQuestion() {
            currentQuiz.currentQuestion++;
            currentQuiz.answered = false;
            
            if (currentQuiz.currentQuestion < currentQuiz.questions.length) {
                // Question suivante
                document.getElementById('question-number').textContent = currentQuiz.currentQuestion + 1;
                document.getElementById('question-text').textContent = currentQuiz.questions[currentQuiz.currentQuestion].question;
                
                const answersContainer = document.getElementById('quiz-answers');
                answersContainer.innerHTML = currentQuiz.questions[currentQuiz.currentQuestion].answers.map((answer, index) => 
                    `<button class="quiz-answer" onclick="selectAnswer(${index})">${answer}</button>`
                ).join('');
                
                const nextButton = document.getElementById('next-button');
                nextButton.classList.remove('show');
                nextButton.textContent = currentQuiz.currentQuestion < currentQuiz.questions.length - 1 ? 'Question suivante' : 'Voir les r√©sultats';
            } else {
                // Afficher les r√©sultats
                showQuizResults();
            }
        }

        function showQuizResults() {
            const percentage = Math.round((currentQuiz.score / currentQuiz.questions.length) * 100);
            let scoreClass, message;
            
            if (percentage >= 80) {
                scoreClass = 'score-excellent';
                message = "üéâ Excellent ! Vous ma√Ætrisez bien vos connaissances !";
            } else if (percentage >= 60) {
                scoreClass = 'score-good';
                message = "üëç Bien jou√© ! Vous avez de bonnes connaissances !";
            } else {
                scoreClass = 'score-needs-improvement';
                message = "üí™ Continuez √† apprendre, vous progresserez !";
            }
            
            chaptersGrid.innerHTML = `
                <div class="quiz-results">
                    <h2>üèÜ R√©sultats du Quiz</h2>
                    <div class="final-score ${scoreClass}">
                        ${currentQuiz.score}/${currentQuiz.questions.length}
                    </div>
                    <div class="final-score ${scoreClass}">
                        ${percentage}%
                    </div>
                    <p style="font-size: 1.2rem; margin: 20px 0; color: white;">
                        ${message}
                    </p>
                    <button class="quiz-restart" onclick="restartQuiz()">
                        üîÑ Recommencer le quiz
                    </button>
                </div>
            `;
        }

        function restartQuiz() {
            showQuiz();
        }

        function showMemo() {
            // Mise √† jour du titre
            chaptersTitle.textContent = "üß† M√©mo 30 secondes - Testez votre m√©moire !";
            
            // Masquer les boutons de chapitres
            chaptersGrid.style.display = 'none';
            
            // Masquer l'histoire pr√©c√©dente
            storyDisplay.classList.remove('show');
            
            // Cr√©er l'interface de s√©lection
            createMemoSelection();
            
            // Afficher le conteneur avec animation
            setTimeout(() => {
                chaptersContainer.classList.add('show');
            }, 100);
        }

        function createMemoSelection() {
            chaptersGrid.innerHTML = `
                <div class="memo-container">
                    <div class="memo-phase">
                        <h2 style="color: #4a90e2; margin-bottom: 20px;">üß† M√©mo 30 secondes</h2>
                        <p style="font-size: 1.1rem; margin-bottom: 30px; color: white;">
                            Choisissez une cat√©gorie et un chapitre. Vous aurez le temps de lire l'histoire, 
                            puis 30 secondes pour r√©pondre √† une question de m√©moire !
                        </p>
                        
                        <div style="display: grid; gap: 15px; max-width: 400px; margin: 0 auto;">
                            <select id="memo-category" class="memo-input" style="cursor: pointer;">
                                <option value="">-- Choisissez une cat√©gorie --</option>
                                <option value="enfant">Histoire Enfant</option>
                                <option value="adulte">Histoire Adulte</option>
                                <option value="religion">Histoire Religion</option>
                            </select>
                            
                            <select id="memo-chapter" class="memo-input" style="cursor: pointer;" disabled>
                                <option value="">-- Choisissez un chapitre --</option>
                            </select>
                            
                            <button class="memo-submit" id="memo-start" onclick="startMemoGame()" disabled>
                                üöÄ Commencer le d√©fi m√©moire
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            chaptersGrid.style.display = 'block';
            
            // Ajouter les √©v√©nements
            document.getElementById('memo-category').addEventListener('change', function() {
                const chapterSelect = document.getElementById('memo-chapter');
                const startButton = document.getElementById('memo-start');
                
                if (this.value) {
                    chapterSelect.disabled = false;
                    chapterSelect.innerHTML = `
                        <option value="">-- Choisissez un chapitre --</option>
                        <option value="1">Chapitre 1</option>
                        <option value="2">Chapitre 2</option>
                        <option value="3">Chapitre 3</option>
                        <option value="4">Chapitre 4</option>
                        <option value="5">Chapitre 5</option>
                    `;
                } else {
                    chapterSelect.disabled = true;
                    chapterSelect.innerHTML = '<option value="">-- Choisissez un chapitre --</option>';
                    startButton.disabled = true;
                }
            });
            
            document.getElementById('memo-chapter').addEventListener('change', function() {
                const startButton = document.getElementById('memo-start');
                startButton.disabled = !this.value;
            });
        }

        function startMemoGame() {
            const category = document.getElementById('memo-category').value;
            const chapter = parseInt(document.getElementById('memo-chapter').value);
            
            currentMemo.category = category;
            currentMemo.chapter = chapter;
            currentMemo.question = memoQuestions[category][chapter - 1];
            currentMemo.phase = 'reading';
            
            showMemoReading();
        }

        function showMemoReading() {
            const story = stories[currentMemo.category].chapters[currentMemo.chapter];
            
            chaptersGrid.innerHTML = `
                <div class="memo-container">
                    <div class="memo-phase">
                        <h2 style="color: #4a90e2; margin-bottom: 20px;">üìñ Lisez attentivement</h2>
                        <p style="color: #ffc107; font-weight: 600; margin-bottom: 20px;">
                            Prenez le temps de bien lire cette histoire. Vous allez devoir r√©pondre √† une question apr√®s !
                        </p>
                        
                        <div class="memo-story">
                            <h3 style="color: #4a90e2; margin-bottom: 15px;">Chapitre ${currentMemo.chapter}</h3>
                            <p>${story}</p>
                        </div>
                        
                        <button class="memo-submit" onclick="startMemoTimer()">
                            ‚úÖ J'ai fini de lire, commencer le test !
                        </button>
                    </div>
                </div>
            `;
        }

        function startMemoTimer() {
            currentMemo.phase = 'questioning';
            currentMemo.timeLeft = 30;
            currentMemo.answered = false;
            
            chaptersGrid.innerHTML = `
                <div class="memo-container">
                    <div class="memo-phase">
                        <div class="memo-timer" id="memo-timer">‚è∞ ${currentMemo.timeLeft} secondes</div>
                        
                        <div class="memo-question">
                            <h3>üß† Question :</h3>
                            <p style="font-size: 1.1rem; color: white;">${currentMemo.question.question}</p>
                            <p style="color: #ffc107; margin-top: 10px;">‚û§ T'as 30 secondes pour t'en souvenir.</p>
                        </div>
                        
                        <div class="quiz-answers" id="memo-answers">
                            ${currentMemo.question.answers.map((answer, index) => 
                                `<button class="quiz-answer" onclick="selectMemoAnswer(${index})">${answer}</button>`
                            ).join('')}
                        </div>
                    </div>
                </div>
            `;
            
            // D√©marrer le timer
            startTimer();
        }

        function startTimer() {
            currentMemo.timer = setInterval(() => {
                currentMemo.timeLeft--;
                const timerElement = document.getElementById('memo-timer');
                
                if (timerElement) {
                    timerElement.textContent = `‚è∞ ${currentMemo.timeLeft} secondes`;
                    
                    // Changer les couleurs selon le temps restant
                    if (currentMemo.timeLeft <= 5) {
                        timerElement.className = 'memo-timer danger';
                    } else if (currentMemo.timeLeft <= 10) {
                        timerElement.className = 'memo-timer warning';
                    }
                }
                
                if (currentMemo.timeLeft <= 0) {
                    clearInterval(currentMemo.timer);
                    timeUp();
                }
            }, 1000);
        }

        function selectMemoAnswer(selectedIndex) {
            if (currentMemo.answered) return;
            
            currentMemo.answered = true;
            
            if (currentMemo.timer) {
                clearInterval(currentMemo.timer);
            }
            
            const correctIndex = currentMemo.question.correct;
            const answers = document.querySelectorAll('.quiz-answer');
            
            answers.forEach((answer, index) => {
                answer.classList.add('disabled');
                if (index === correctIndex) {
                    answer.classList.add('correct');
                } else if (index === selectedIndex) {
                    answer.classList.add('wrong');
                }
            });
            
            const isCorrect = selectedIndex === correctIndex;
            const selectedAnswer = currentMemo.question.answers[selectedIndex];
            
            // Attendre un peu pour laisser voir l'animation
            setTimeout(() => {
                showMemoResult(isCorrect, selectedAnswer, false);
            }, 1500);
        }

        function timeUp() {
            if (currentMemo.answered) return;
            
            currentMemo.answered = true;
            const answers = document.querySelectorAll('.quiz-answer');
            const correctIndex = currentMemo.question.correct;
            
            answers.forEach((answer, index) => {
                answer.classList.add('disabled');
                if (index === correctIndex) {
                    answer.classList.add('correct');
                }
            });
            
            setTimeout(() => {
                showMemoResult(false, '', true);
            }, 1500);
        }

        function showMemoResult(isCorrect, userAnswer = '', timeExpired = false) {
            currentMemo.phase = 'finished';
            
            let resultMessage, resultClass;
            
            if (timeExpired) {
                resultMessage = "‚è∞ Temps √©coul√© ! Vous n'avez pas r√©pondu √† temps.";
                resultClass = "failure";
            } else if (isCorrect) {
                resultMessage = "üéâ Bravo ! Excellente m√©moire !";
                resultClass = "success";
            } else {
                resultMessage = "‚ùå Pas tout √† fait... R√©essayez pour am√©liorer votre m√©moire !";
                resultClass = "failure";
            }
            
            chaptersGrid.innerHTML = `
                <div class="memo-container">
                    <div class="memo-phase">
                        <h2 style="color: #4a90e2; margin-bottom: 20px;">üìä R√©sultat</h2>
                        
                        <div class="memo-result ${resultClass}">
                            ${resultMessage}
                        </div>
                        
                        <div style="background: rgba(74, 144, 226, 0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">
                            <p style="color: #4a90e2; font-weight: 600; margin-bottom: 10px;">Question :</p>
                            <p style="color: white; margin-bottom: 15px;">${currentMemo.question.question}</p>
                            
                            <p style="color: #4a90e2; font-weight: 600; margin-bottom: 10px;">Bonne r√©ponse :</p>
                            <p style="color: #28a745; font-weight: 600; margin-bottom: 15px;">${currentMemo.question.answers[currentMemo.question.correct]}</p>
                            
                            ${userAnswer && !timeExpired ? `
                                <p style="color: #4a90e2; font-weight: 600; margin-bottom: 10px;">Votre r√©ponse :</p>
                                <p style="color: ${isCorrect ? '#28a745' : '#dc3545'}; font-weight: 600;">${userAnswer}</p>
                            ` : ''}
                            
                            <div style="margin-top: 15px; padding: 10px; background: rgba(255, 196, 57, 0.1); border-radius: 5px; border-left: 3px solid #ffc439;">
                                <p style="color: #ffc439; font-weight: 600; margin-bottom: 5px;">üí° Explication :</p>
                                <p style="color: white; font-size: 0.95rem;">${currentMemo.question.explanation}</p>
                            </div>
                        </div>
                        
                        <button class="memo-restart" onclick="showMemo()">
                            üîÑ Nouveau d√©fi m√©moire
                        </button>
                    </div>
                </div>
            `;
        }

        function showEnigme() {
            // Initialiser les √©nigmes
            currentEnigme.currentQuestion = 0;
            currentEnigme.score = 0;
            currentEnigme.enigmes = [...enigmeData.enigmes].sort(() => Math.random() - 0.5).slice(0, 5);
            currentEnigme.answered = false;
            
            // Mise √† jour du titre
            chaptersTitle.textContent = "üîç √ânigmes - Testez votre logique !";
            
            // Masquer les boutons de chapitres
            chaptersGrid.style.display = 'none';
            
            // Masquer l'histoire pr√©c√©dente
            storyDisplay.classList.remove('show');
            
            // Cr√©er l'interface d'√©nigmes
            createEnigmeInterface();
            
            // Afficher le conteneur avec animation
            setTimeout(() => {
                chaptersContainer.classList.add('show');
            }, 100);
        }

        function createEnigmeInterface() {
            chaptersGrid.innerHTML = `
                <div class="quiz-container">
                    <div class="quiz-header">
                        <div class="quiz-score">
                            Score: <span id="current-enigme-score">${currentEnigme.score}</span>/${currentEnigme.enigmes.length}
                        </div>
                        <div style="color: #4a90e2; font-weight: 600;">
                            √ânigme <span id="enigme-number">${currentEnigme.currentQuestion + 1}</span> sur ${currentEnigme.enigmes.length}
                        </div>
                    </div>
                    
                    <div class="quiz-question">
                        <h3 id="enigme-text">${currentEnigme.enigmes[currentEnigme.currentQuestion].enigme}</h3>
                        <div class="quiz-answers" id="enigme-answers">
                            ${currentEnigme.enigmes[currentEnigme.currentQuestion].answers.map((answer, index) => 
                                `<button class="quiz-answer" onclick="selectEnigmeAnswer(${index})">${answer}</button>`
                            ).join('')}
                        </div>
                    </div>
                    
                    <div style="text-align: center;">
                        <button class="quiz-next" id="enigme-next-button" onclick="nextEnigme()">
                            ${currentEnigme.currentQuestion < currentEnigme.enigmes.length - 1 ? '√ânigme suivante' : 'Voir les r√©sultats'}
                        </button>
                    </div>
                    
                    <div id="enigme-explanation" style="display: none; background: rgba(74, 144, 226, 0.1); padding: 15px; border-radius: 8px; margin-top: 15px; border: 1px solid #4a90e2;">
                        <p style="color: #4a90e2; font-weight: 600; margin-bottom: 8px;">üí° Explication :</p>
                        <p style="color: white; font-size: 0.95rem;"></p>
                    </div>
                </div>
            `;
            chaptersGrid.style.display = 'block';
        }

        function selectEnigmeAnswer(selectedIndex) {
            if (currentEnigme.answered) return;
            
            currentEnigme.answered = true;
            const correctIndex = currentEnigme.enigmes[currentEnigme.currentQuestion].correct;
            const answers = document.querySelectorAll('.quiz-answer');
            const explanation = currentEnigme.enigmes[currentEnigme.currentQuestion].explication;
            
            answers.forEach((answer, index) => {
                answer.classList.add('disabled');
                if (index === correctIndex) {
                    answer.classList.add('correct');
                } else if (index === selectedIndex) {
                    answer.classList.add('wrong');
                }
            });
            
            if (selectedIndex === correctIndex) {
                currentEnigme.score++;
                document.getElementById('current-enigme-score').textContent = currentEnigme.score;
            }
            
            // Afficher l'explication
            const explanationDiv = document.getElementById('enigme-explanation');
            explanationDiv.querySelector('p:last-child').textContent = explanation;
            explanationDiv.style.display = 'block';
            
            document.getElementById('enigme-next-button').classList.add('show');
        }

        function nextEnigme() {
            currentEnigme.currentQuestion++;
            currentEnigme.answered = false;
            
            if (currentEnigme.currentQuestion < currentEnigme.enigmes.length) {
                // √ânigme suivante
                document.getElementById('enigme-number').textContent = currentEnigme.currentQuestion + 1;
                document.getElementById('enigme-text').textContent = currentEnigme.enigmes[currentEnigme.currentQuestion].enigme;
                
                const answersContainer = document.getElementById('enigme-answers');
                answersContainer.innerHTML = currentEnigme.enigmes[currentEnigme.currentQuestion].answers.map((answer, index) => 
                    `<button class="quiz-answer" onclick="selectEnigmeAnswer(${index})">${answer}</button>`
                ).join('');
                
                const nextButton = document.getElementById('enigme-next-button');
                nextButton.classList.remove('show');
                nextButton.textContent = currentEnigme.currentQuestion < currentEnigme.enigmes.length - 1 ? '√ânigme suivante' : 'Voir les r√©sultats';
                
                // Masquer l'explication pr√©c√©dente
                document.getElementById('enigme-explanation').style.display = 'none';
            } else {
                // Afficher les r√©sultats
                showEnigmeResults();
            }
        }

        function showEnigmeResults() {
            const percentage = Math.round((currentEnigme.score / currentEnigme.enigmes.length) * 100);
            let scoreClass, message;
            
            if (percentage >= 80) {
                scoreClass = 'score-excellent';
                message = "üß† G√©nie ! Votre logique est redoutable !";
            } else if (percentage >= 60) {
                scoreClass = 'score-good';
                message = "ü§î Bien raisonn√© ! Vous avez l'esprit logique !";
            } else {
                scoreClass = 'score-needs-improvement';
                message = "üí≠ Continuez √† vous entra√Æner, la logique se d√©veloppe !";
            }
            
            chaptersGrid.innerHTML = `
                <div class="quiz-results">
                    <h2>üèÜ R√©sultats des √ânigmes</h2>
                    <div class="final-score ${scoreClass}">
                        ${currentEnigme.score}/${currentEnigme.enigmes.length}
                    </div>
                    <div class="final-score ${scoreClass}">
                        ${percentage}%
                    </div>
                    <p style="font-size: 1.2rem; margin: 20px 0; color: white;">
                        ${message}
                    </p>
                    <button class="quiz-restart" onclick="restartEnigme()">
                        üîÑ Nouvelles √©nigmes
                    </button>
                </div>
            `;
        }

        function restartEnigme() {
            showEnigme();
        }

        // Animation au chargement
        window.addEventListener('load', function() {
            document.body.style.opacity = '0';
            document.body.style.transition = 'opacity 0.5s ease';
            setTimeout(() => {
                document.body.style.opacity = '1';
            }, 100);
        });
    </script>
</body>
</html>
